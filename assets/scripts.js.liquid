var prevent_atc = function (event) {
    event.preventDefault();
};
const addToCartForms = document.querySelectorAll('form[action="/cart/add"]');
for (let i = 0; i < addToCartForms.length; i++) {
    addToCartForms[i].getElementsByTagName('button')[0].addEventListener('click', function (event) {
        event.preventDefault();

        // Submit form with ajax
        fetch("/cart/add", {
            method: "post",
            body: new FormData(addToCartForms[i]),
        });

        // Get new cart object
        const res = await fetch("/cart.json")
        const cart = await res.json();

        // Update cart count
        const cart_count = document.getElementsByClassName('header__cart-count-number')[0]
        cart_count.innerText = cart.item_count;
        if(cart.item_count > 0){
            cart_count.style.visibility = "visible";
        }
        

    });
}